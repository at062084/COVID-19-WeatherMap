---
title: "COVID-19 und Sterblichkeit in Österreich"
author: "Thomas.Strehl@at.ibm.com"
date: '2021-08-01'
output:
  html_document:
    fig_caption: no
    fig_height: 4
    fig_width: 7
    number_sections: no
    toc: yes
    toc_depth: 2
  word_document:
    toc: yes
    toc_depth: '2'
  pdf_document:
    fig_height: 4
    fig_width: 7
    number_sections: yes
    toc: yes
    toc_depth: 2
  always_allow_html: yes
geometry: margin=1cm
---
  
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message=FALSE)
#knitr::opts_chunk$set(fig.align="center")
#options(knitr.table.format = 'html')
library(ggplot2)
library(dplyr)
library(tidyr)
library(lubridate)
library(forcats)
library(knitr)
library(gt)
library(pivottabler)
library(kableExtra)
```

```{r}
source("cwm-data.R")
source("cwm-util.R")
cbPalette <- c("#999999", "#E69F00", "#56B4E9", "#009E73", "#444444", "#F0D042", "#0072B2", "#D55E00", "#CC79A7", "#C40000")
```


# Überblick

Das vorliegende Dokument beschäftigt sich mit dem Verhältnis der Sterblichkeit an COVID-19 und der allgemeinen Sterblichkeit in Österrreich. Es vergleicht die demographischen Daten zu den Todesfällen im Laufe eines Jahres mit den epidemiologischen Daten zu COVID-19 im ersten Jahr der Pandemie.

Es ist der erste Teil einer dreiteiligen Untersuchung zur Gefährlichkeit von COVID-19 und den Wirkungen und Nebenwirkungen von COVID-19 Impfungen.

Die wichtigsten Beobachtungen der vorliegenden Untersuchung sind:

**Demographische Sterblichkeit:**

- Jedes Jahr verstirbt etwa 1% der Bevölkerung (2019: 83.000 von 8.9 Mio Einwohnern)
- Die Wahrscheinlichkeit zu sterben steigt mit dem Alter massiv (exponentiell) an
- 1% der Todesfälle betrifft Personen unter 30 Jahren, 15% unter 65 Jahren, und 85% der Verstorbenen ist über 65 Jahre.

**COVID-19 Sterblichkeit:**

- Im ersten Jahr der Pandemie (incl 2. Welle) sind etwa 1% der Infizierten verstorben (8.400 von ca. 900.000 bei 50% Asymptomatischen) 
- Die Wahrscheinlichkeit an COVID-19 zu sterben steigt exponentiell mit dem Alter, und zwar noch schneller als bei der demographischen Sterblichkeit
- 1% der Todesfälle betrifft Personen unter 50 Jahren, 6% der Todesfälle sind unter 65 Jahre, 94% sind älter als 65 Jahre. 

**Allgemeines und Individuelles Risiko:**

- Bei der Einstufung der Lage gibt es die 'offizielle Sichtweise', die sich mit der absoluten Gesamtzahl der Infizierten, Erkrankten und Verstorbenen beschäftigt
- Aus dieser Sicht sind die am meisten gefährdeten und zu schützenden Altersgruppen die 65-75, 75-85 und 85+ jährigen, mit 13%, 34% und 47% der Todesfälle.

- Auf der anderen Seite gibt es das individuelle Risiko an COVID-19 zu erkranken bzw. zu sterben. Hier ist die Betrachtung der Anzahl der z.B. Sterbefälle  pro 100.000 Infizierte, Hospitalisierte bzw. ICU von Relevanz.
- So sind z.b. ca. 4%, 11% bzw. 21% der positiv auf Corona Gesteteten 65-75, 75-85 bzw. 85+ jährigen an/mit COVID-19 verstorben.


# Datenquellen

- Die demographischen Daten sind dem Portal der Statistik Austria unter https://portal.statistik.at/statistik.at/ext/statcube/jsf/dataCatalogueExplorer.xhtml entnommen. 
- Die epidemiologischen Daten der AGES sind am 'Österreichisches COVID-19 Open Data Informationsportal' auf https://www.data.gv.at/covid-19 veröffentlicht.


## Datensätze

- StatA-Population-2019_AgeGroup_Gender.csv: Der Datensatz enthält Angaben zu Jahr, Geschlecht, Altersgruppe (in 20 fünf Jahres Schritten) und Anzahl Einwohner.
- StatA-Sterbefaelle-Year_AgeGroup_Gender.csv: Der Datensatz enthält Angaben zu Jahr, Geschlecht, Altersgruppe (in 20 fünf Jahres Schritten) und Anzahl Sterbefälle.
- AGES-CovidFaelle_Altersgruppe.20210228.csv: Positiv Gesteste und an/mit COVID-19 Verstorbene nach Geschlecht und Altersgruppe (in 10 zehn Jahres Schritten) bis zum 28.2.2021
- AGES-eimpfpass.csv:

# Sterblichkeit in Österreich

## Alterstruktur der Bevölkerung 2019

Zunächst die Alterstruktur in Österreich für 2019 in 20 fünf Jahres Intervallen. Die beiden Altersgruppen 'Unter65' und 'Über65' teilen in 'weniger Gefährdete' und 'stark Gefährdete'.

```{r}
# get population data
dp.y <- caStatAData_p_ag()
```

```{r}
ggplot(data=dp.y %>% dplyr::mutate(Population=round(Population/1000)),
       aes(y=Population, x=AgeGroup20)) +
  geom_col(aes(color=Gender, fill=Gender, alpha=AgeGroup2), position="dodge", size=1) +
  scale_y_continuous(name="Einwohner (in 1000)") +
  ggtitle("Österreich: Altersverteilung 2019. Daten: Statistik Austria") +
  coord_flip()
```


Altersgruppen: 

- Bis zu einem Alter von 20 Jahren gibt es etwa 80.000 Einwohner pro Jahrgang
- Von 25 bis 50 Jahren sind es etwa 120.000, von 55 bis 65 Jahre etwa 140.000 Einwohner pro Jahrgang
- Ab 65 Jahren nimmt die Anzahl stark ab, über 90 Jahre sind insgesamt etwa 80.000 Menschen (ca. 1%)

Altersstruktur:

- 7.2 Mio (81%) Einwohner sind unter 65 Jahre, 1.7 Mio (19%) über 65 Jahre
- Die Anzahl der Personen im erwerbsfähigen Alter ist etwa 5.5 Mio (62 %)
- Die junge Generation (1-25 Jahre) ist gegenüber den Erwachsenen (25-65 Jahre) pro Jahrgang um etwa 30% in der Unterzahl
- Bei den Personen über 65 Jahre ist der Frauenanteil etwa 57%, bei den Personen unter 65 Jahre etwa 51%



<center>
**Einwohner 2019 nach Altersgruppe und Geschlecht**
```{r}
dp <- dp.y %>% dplyr::select(Gender, AgeGroup20, AgeGroup2, Population)
pt <- makePT(dp, "Gender")
pt$addRowDataGroups("AgeGroup2", outlineBefore=TRUE, outlineTotal=TRUE)
pt$addRowDataGroups("AgeGroup20", outlineTotal=FALSE)
# pt$addRowDataGroups("AgeGroup2", outlineTotal=TRUE, outlineBefore=FALSE)
#3 pt$addRowDataGroups("AgeGroup2", outlineTotal=TRUE, outlineBefore=TRUE)
#3 pt$addRowDataGroups("AgeGroup20", outlineTotal=TRUE)
defPTcalcAbs(pt, calName="Einwohner", summariseExp="paste0(round(sum(Population)/1000), ' k')")
pt$renderPivot()
``` 
</center>





## Todesfälle in Österreich 2015-2019

Die Anzahl der Todesfälle ist in erster Linie vom Alter beeinflusst. Gewisse Unterschiede zwischen verschiedenen Jahren sind zu erkennen, aber vom allgemeinen Trend dominiert. 

```{r}
# Get mortality data
ddY <- caStatAData_m_ag()
```

```{r}

# Add AgeGroup as used by Ages
dpd.y <- dd.Y %>% dplyr::filter(Year=="2019") %>%
  dplyr::left_join(dp.y, by=c("AgeGroup20", "Gender", "Year", "AgeGroupID20", "AgeGroup2")) %>%
  dplyr::mutate(Deceased_100k=Deceased/Population*100000) %>%
  dplyr::mutate(AgeGroupID=ceiling((pmin(AgeGroupID20,18)+1)/2)) %>%
  dplyr::mutate(AgeGroup=paste(pmax(0,(AgeGroupID-1)*10-5),"-", ifelse(AgeGroupID*10-5<90,AgeGroupID*10-6,""), sep=""))

# Patch for AGES namings
idx <- dpd.y$AgeGroup=="0-4"
dpd.y$AgeGroup[idx] <- "<5"
idx <- dpd.y$AgeGroup=="85-"
dpd.y$AgeGroup[idx] <- ">84"

# ensure AgeGroup is ordered
dpd.y <- dpd.y %>%
  dplyr::mutate(AgeGroup=factor(dpd.y$AgeGroup, levels=dpd.y$AgeGroup %>% unique(), ordered=TRUE)) %>%
  dplyr::select(Year, AgeGroupID20, AgeGroup20, AgeGroupID, AgeGroup, AgeGroup2, Gender, Population, Deceased, Deceased_100k)

```

```{r}
ggplot(data=dd.Y %>% dplyr::rename(Verstorben=Deceased), aes(x=AgeGroup20, y=Verstorben, group=Year, color=Year, shape=Year)) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  geom_line() +
  geom_point() +
  facet_grid(Gender~.) +
  ggtitle("Österreich: Anzahl Todesfälle pro Jahr und Altersgruppe für 2015-2019")
```

Sterblichkeit in 2015-2019:

- Die Anzahl der Todesfälle nimmt mit dem Alter stark zu
- Die Altersabhängigkeit ist in den betrachteten Jahren ähnlich
- Die Männer sterben früher als die Frauen
- Die meisten Männer sterben mit 75-90, die meisten Frauen mit 85-95
- Etwas geringere Anzahl von Sterbefällen bei den Männern in der Altersgruppe 80-85 (Ursache nicht bekannt)

- In Summe starben in Österreich 2019 etwa 83.000 Personen, das ist ca. 1% (oder 1000 von 100k) der Bevölkerung
- Grob 12.000 davon, das sind ca. 15%, waren unter 65 Jahre, 71.000, das sind ca. 85%, über 65 Jahre alt

<center>
**Verstorbene 2019 nach Altersgruppe und Geschlecht**

```{r}
dd.Y.1 <- dd.Y %>% dplyr::filter(Year=="2019") %>% dplyr::select(Gender, AgeGroup20, AgeGroup2, Deceased)
pt <- makePT(dd.Y.1, "Gender")
pt$addRowDataGroups("AgeGroup2", outlineBefore=TRUE, outlineTotal=TRUE)
pt$addRowDataGroups("AgeGroup20", outlineTotal=FALSE)
#pt$addRowDataGroups("AgeGroup2", outlineTotal=TRUE, outlineBefore=FALSE)
defPTcalcAbs(pt, calName="Verstorbene", summariseExp="paste0(round(sum(Deceased)))")
pt$renderPivot()
``` 
</center>

```{r, fig.show=FALSE}
# Old variant of plot
#ggplot(data=dd.Y, aes(x=Deceased, y=AgeGroupID20)) +
#  geom_path(aes(color=Year, linetype=Gender)) +
#  geom_point(aes(shape=Gender)) +
#  scale_y_continuous(breaks=1:20, labels=levels(dd$AgeGroup20)) +
#  ggtitle("Österreich: Anzahl Todesfälle pro Jahr und Altersgruppe für 2015-2019")
```



### Umrechnung auf Todesfälle pro 100k Einwohner

Zur besseren Vergleichbarkeit der Sterblichkeit mit epidemiologischen Daten wird auf Todesfälle pro 100k Einwohner pro Altersgruppe und Geschlecht umgerechnet. 

Das ergibt gleichzeitig das individuelle Risiko in einem gewissen Alter zu versterben. So ist z.B. die Anzahl der Verstorbenen, die über 100 Jahre alt sind, vergleichweise niedrig. Aber die Anzahl der verstorbenen 100-Jährigen umgerechnet auf 100000 100-Jährige sehr hoch.   

```{r}
ggplot(data=dpd.y %>% dplyr::rename(Verstorben_100k=Deceased_100k) %>% dplyr::filter(Year=="2019"), 
       aes(y=Verstorben_100k, x=AgeGroup20, group=Gender, color=Gender, shape=Gender)) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  geom_line() +
  geom_point() +
  ggtitle("Österreich: Anzahl Todesfälle 2019 pro 100.000 Personen in Altersgruppe")
```


Anzahl Verstorbene pro Jahr pro 100.000 Einwohner pro Altersgruppe

- Die Gruppe der 5-9 Jährigen hat mit 7 pro 100k die niedrigste Sterblichkeit
- Die Gruppe der Personen älter als 95 Jahre hat mit 35.000 von 100k die höchste Sterblichkeit 

- In der Gruppe unter 65 Jahren sind ca.  170 (0.17%) von 100k Personen verstorben
- In der Gruppe über  65 Jahre  sind ca. 4200 (4.20%) von 100k Personen verstorben
- Von 100k Personen beliebigen Alters sind 939 Personen verstorben. Das entspricht dem weiter oben genannten Wert von 1% Sterbefälle pro Jahr

- Im Mittel ist die Sterblichkeit der über 65-jährigen *25 mal höher* als die der Gruppe der unter 65-jährigen (4.2/0.17=~25)
- Die Sterblichkeit der 30-35-Jährigen ist *100 mal niedriger* als die der 85-89-Jährigen

Anmerkung: 

- In allen nachfolgenden Tabellen sind auf 100k Personen normierte Werte in **blau** dargestellt
- 1.000 (1k) von 100.000 (100k) Personen entspricht 1%
- Üblicherweise wird auf '100k Einwohner' normiert, manchmal (z.B. bei den Covid-19 Sterbefällen) auch auf '100k Positiv Getestete' oder (bei den Nebenwirkungen) auf 100k Geimpfte


<center>
**Verstorbene 2019 pro 100k Einwohner nach Altersgruppe und Geschlecht**

```{r}
pt <- makePT(dpd.y, "Gender")
#pt$addRowDataGroups("AgeGroup2", outlineTotal=TRUE)
pt$addRowDataGroups("AgeGroup2", outlineBefore=TRUE, outlineTotal=TRUE)
pt$addRowDataGroups("AgeGroup20", outlineTotal=FALSE)
defPTcalcRel(pt, "TodesFälle", "round(sum(Deceased)/sum(Population)*100000)")
pt$renderPivot()
```  
</center>

```{r}

#ggplot(data=dpd.y, aes(y=AgeGroupID20, x=Deceased_100k, color=Gender, shape=Gender)) +
#  scale_x_continuous(limits=c(1,NA), trans="identity") +
#  scale_y_continuous(breaks=1:20, labels=levels(dpd.y$AgeGroup20)) +
#  geom_point(aes(color=Gender, shape=Gender)) + 
#  geom_path(aes(color=Gender)) + 
#  ggtitle("Verstorbene 2019 pro 100k nach Alter und Geschlecht (lin scale)")

```


### Exponentielle Zunahme der Sterblichkeit mit zunehmendem Alter

Zur Verdeutlichung des exponentiellen Charakters der Sterblichkeit mit zunehmendem Alter eine logarithmische Darstellung der Fallzahlen. Die dargestellten Zahlen sind ident mit dem vorangegengenen Plot. Der einzige Unterschied ist die (logarithmische) Skalierung der y-Achse.

```{r}
ggplot(data=dpd.y %>% dplyr::rename(Verstorben_100k=Deceased_100k) %>% dplyr::filter(Year=="2019"), 
       aes(y=Verstorben_100k, x=AgeGroup20, group=Gender, color=Gender, shape=Gender)) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  scale_y_continuous(trans="log10") +
  geom_line() +
  geom_point() +
  geom_line(aes(y=100)) +
  geom_line(aes(y=1000)) +
  geom_line(aes(y=10000)) +
  ggtitle("Österreich: Anzahl Todesfälle 2019 pro 100.000 Personen in Altersgruppe")
```

```{r}

#ggplot(data=dpd.y, aes(y=AgeGroupID20, x=Deceased_100k, color=Gender, shape=Gender)) +
#  scale_x_continuous(limits=c(4,NA), trans="log10") +
#  scale_y_continuous(breaks=1:20, labels=levels(dpd.y$AgeGroup20)) +
#  geom_point(aes(color=Gender, shape=Gender)) + 
#  geom_path(aes(color=Gender), linetype=1) + 
#  #geom_point(aes(x=Deaths, color=Gender, shape=Gender)) + 
#  #geom_path(aes(x=Deaths, color=Gender), linetype=2) + 
#  ggtitle("Verstorbene 2019 pro 100k nach Alter und Geschlecht (log scale)")

```


Multiplikative Zunahme der Sterblichkeit mit dem Alter

- Die Wahrscheinlichkeit in einem Jahr zu sterben steigt ab ca. 40 Jahren in 20 Jahresschritten um rund einen Faktor 10
- D.h. sie ist mit 60-65 Jahren etwa zehn, mit 80-85 Jahren etwa hundert mal so hoch als mit 40-45 Jahren
- Von 100.000 80-Jährigen sterben pro Jahr grob *100 mal* so viele wie von 100.000 30-Jährigen
- Pro Jahr sterben im Mittel 40 von 100k 40-45-jährigen, 300 von 100k 60-65-jährigen und 2000 von 100k 80-85-jährigen


### Inkrementelle Summe der Todesfälle nach Alterstufe in 2019

In dieser Darstellung lassen sich einige Eckdaten einfach ablesen.

```{r, align="center"}
#str(dpd.y)

dp <- dpd.y %>% 
  dplyr::select(AgeGroup20, Gender, Deceased) %>%
  dplyr::arrange(Gender, AgeGroup20) %>%
  dplyr::group_by(Gender) %>%
  dplyr::mutate(relDeceased = round(cumsum(Deceased)/sum(Deceased),4)) %>%
  dplyr::ungroup()
```


```{r}


ggplot(data=dp %>% dplyr::mutate(CumSum_Prozent_Verstorbene=relDeceased*100), aes(x=AgeGroup20, y=CumSum_Prozent_Verstorbene, group=Gender, color=Gender, shape=Gender)) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  scale_y_continuous(breaks=c(.01,.02,.05,.1,.2,.5,1)*100, trans="log10") +
  geom_point() +
  geom_line() +
  geom_line(y=log10(.01*100)) +
  geom_line(y=log10(.1*100)) +
  ggtitle("Prozentsatz der Verstorbenen bis zu einer Alterstufe nach Geschlecht")

```

Kummulative Summe der Todesfälle nach Altersgruppen:

- 1% der Verstorbenen ist unter 30 Jahre alt (Männer: 25 Jahre, Frauen: 35 Jahre)
- 10% der Verstorbenen sind unter 60 Jahre, d.h. 90% sind über 60 Jahre alt (Männer: 55 Jahre, Frauen: 65 Jahre)
- 50% der Verstorbenen sind über 80 Jahre alt


<center>
**Inkrementelle Summe der Todesfälle nach Alterstufe in 2019**


```{r} 
pt <- makePT(dp, "Gender")
pt$addRowDataGroups("AgeGroup20", outlineTotal=TRUE)
defPTcalcAbs(pt, "TodesFälle", "round(mean(relDeceased),3)")
pt$renderPivot()
```  
</center>


```{r, fig.show=FALSE}

# Old variant of plot
#ggplot(data=dpd.y, color=Gender, shape=Gender) +
#  scale_x_continuous(limits=c(4,NA), breaks=seq(0,50000,5000), trans="identity") +
#  scale_y_continuous(breaks=1:20, labels=levels(dpd.y$AgeGroup20)) +
#  geom_point(data=dpd.y %>% dplyr::filter(Gender=="M"), aes(y=AgeGroupID20, x=cumsum(Deceased), color=Gender, shape=Gender)) + 
#  geom_point(data=dpd.y %>% dplyr::filter(Gender=="W"), aes(y=AgeGroupID20, x=cumsum(Deceased), color=Gender, shape=Gender)) + 
#  geom_path(data=dpd.y %>% dplyr::filter(Gender=="M"), aes(y=AgeGroupID20, x=cumsum(Deceased), color=Gender), linetype=1) + 
#  geom_path(data=dpd.y %>% dplyr::filter(Gender=="W"), aes(y=AgeGroupID20, x=cumsum(Deceased), color=Gender), linetype=1) + 
#  ggtitle("Prozentsatz der Verstorbenen bis zu einer Alterstufe nach Geschlecht")

```


# COVID-19 im ersten Jahr der Pandemie

Im folgenden wird die Anzahl der im ersten Jahr der Pandemie an oder mit COVID-19 verstorbenen Personen der Anzahl der Verstorbenen im Jahr 2019 gegenübergestellt. Der betrachtete Zeitraum umfasst die Monate 3/2020 bis 3/2021 mit der 'Ersten Welle' im März 2020 und der 'Zweiten Welle' im Oktober/November/Dezember 2020. 

In diesem Zeitraum änderte sich u.A. die Methode der Zählung der Verstorbenen, die Behandlungsmethoden in den Spitälern ebenso wie die Schutzmassnahmen für die am meisten gefährdeten Altersgruppen und die vorherrschenden Mutationen des Corona Virus.

Insofern ist die Betrachtung des ersten Jahres als Mittelwert über unterschiedliche Phasen der Pandemie zu verstehen.



```{r}
# git checkout 4dcb0fe50d4a34fbedf0a413f13f32334d58b873  data/ages/CovidFaelle_Altersgruppe.csv (28.2.2021)

df <- read.csv("./data/CovidFaelle_Altersgruppe.20210228.csv", sep=";", stringsAsFactors=FALSE)
#str(df)
#levels(factor(df$Altersgruppe))
df$Altersgruppe <- fct_reorder(factor(df$Altersgruppe, ordered=TRUE),df$AltersgruppeID,sum)
#levels(df$Altersgruppe)

dcd.y <- df %>%
  dplyr::rename(AgeGroup=Altersgruppe, AgeGroupID=AltersgruppeID, 
                Region=Bundesland, RegionID=BundeslandID, Population=AnzEinwohner) %>%
  dplyr::mutate(AgeGroup2=ifelse(AgeGroupID<=7,"Unter65","Über65")) %>%
  dplyr::mutate(AgeGroup2 = factor(AgeGroup2, levels=c("Unter65","Über65"))) %>%
  dplyr::rename(sumConfirmed=Anzahl, sumRecovered=AnzahlGeheilt, sumDeath=AnzahlTot, Gender=Geschlecht) %>%
  dplyr::select(Region, RegionID, AgeGroup, AgeGroupID, Gender, AgeGroup2, Population, sumConfirmed, sumDeath) %>%
  dplyr::mutate(Gender=factor(Gender)) %>%
  dplyr::mutate(sumConfirmed_100k=sumConfirmed/Population*100000, sumDeath_100k=sumDeath/sumConfirmed*100000)

dcd.oe <- dcd.y %>% 
  dplyr::filter(Region=="Österreich") %>% 
  dplyr::select(-Region, -RegionID)
#str(dcd.oe)
```  


```{r}

# Aggregate StatistikAustria AgeGroup20 into AGES AgeGroup10
dpd.oe <- dpd.y %>%
  dplyr::select(-Year, -AgeGroupID20, -AgeGroup20) %>%
  dplyr::group_by (AgeGroupID, AgeGroup, Gender) %>%
  dplyr::summarize (.groups="drop", AgeGroup2=first(AgeGroup2), Population=sum(Population), Deceased=sum(Deceased), Deceased_100k=sum(Deceased)/sum(Population)*100000)
# str(dpd.oe)

# Join Statistik Austria data in dpd.y (Österreich, Altersgruppen) with AGES Data (Regions, Altersgruppen)
dpcd.oe <- dcd.oe %>% 
  # Take Population from AGES dataset (values 2/2021) rather than of StatistikAustria (2019): Differences less than 1.5%
  dplyr::inner_join(dpd.oe %>% dplyr::select(-Population), by=c("AgeGroupID", "AgeGroup","AgeGroup2","Gender"))
  
# str(dpcd.oe)
```  



## Positiv Getestete und Verstorbene

Der Zusammenhang zwischen der Anzahl der Positiv auf das Corona Virus Gesteteten und den an/mit Corona verstorbenen Personen wird von einer Reihe von Faktoren beeinflusst. In erster Linie sollte die Anzahl der Positiv Getesteten ein Mass für die Verbreitung des Virus in der Bevölkerung und damit ein Mass für die zu erwartende Anzahl an Todesfällen sein. 

Zusätzlich zur Verbreitung des Virus hat auch die Auswahl der getesteten Personen (Symptomatisch, Berufsgruppen, Zutritt, ...),  die Art der Tests (PCR, Antigen) und die Regelmässigkeit der Tests einen Einfluss auf die gemeldete Anzahl an Positiv Getesteten. Auf der anderen Seite beeinflussen u.a. die Behandlungsmethoden und Schutzmassnahmen für gefährdete Personengruppen den Verlauf der Krankheit und das Ausmass der Sterblichkeit.

Nicht zuletzt ist auch die Erfassung und Anlieferung der Daten, auch jene der an/mit COVID-19 Verstorbenen, nicht immer fehlerfrei verlaufen. Insofern können die folgenden Zahlen bestenfalls Anhaltspunkte über den tatsächlichen Verlauf des epidemiologischen Geschehens vermitteln. 

Anmerkung: Die zwanzig 5-Jahres Altersstufen der Statistik Austria sind in diesem und den folgenden Abschnitten in die zehn 10-Jahres Altersgruppen der AGES umgerechnet


### Anzahl Positiv Getestete und Verstorbene nach Altersgruppe und Geschlecht

```{r}
ggplot(data=dpcd.oe %>% dplyr::rename(Verstorben=sumDeath), aes(x=AgeGroup, y=Verstorben, group=Gender, color=Gender, shape=Gender)) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  geom_line() +
  geom_point() +
  ggtitle("COVID-19 Österreich: Anzahl Todesfälle pro Altersgruppe")
```

Todesfälle an/mit COVID-19:

- Im ersten Jahr der Pandemie wurden etwa 450.000 Personen positiv auf das Virus getestet
- Etwa 8400 (ca. 2%) davon sind an/mit COVID-19 verstorben (Spalte Ver/Pos%)
- Das sind etwa 10% aller Todesfälle (gemessen an 2019), und 0.1% der Bevölkerung
- Etwa 500 (ca. 6%) der Verstorbenen waren unter 65 Jahre, etwa 8000 (ca. 94%) über 65 Jahre (Spalte Pos/Pos%)

<center>
**COVID-19 Österreich: Einwohner, positiv Getestete und Verstorbene nach Altersgruppe und Geschlecht**

```{r}
pt <- makePT(dpcd.oe, "Gender")
pt$addRowDataGroups("AgeGroup2", outlineBefore=TRUE, outlineTotal=TRUE)
pt$addRowDataGroups("AgeGroup", addTotal=FALSE)
defPTcalcAbs(pt, "Einwohner", "paste0(round(sum(Population)/1000), ' k')")
defPTcalcAbs(pt, "Positiv", "paste0(round(sum(sumConfirmed)/1000), ' k')")
defPTcalcAbs(pt, "Verstorben", "sum(sumDeath)")
defPTcalcRel(pt, "Ver/Pos%", "round(sum(sumDeath)/sum(sumConfirmed),4)*100")
defPTcalcRel(pt, "Pos/Pos%", "round(sum(sumDeath)/sum(dpcd.oe$sumDeath),4)*100")
pt$renderPivot()
```  

</center>







### Anzahl Positiv Getestete und Verstorbene normiert auf 100.000

Die Umrechnung auf Anzahl Todesfälle pro 100.000 Personen je Altersgruppe errechnet das individuelle Sterberisiko bei einem gegebenen Alter.  

- Die Altersgruppe unter 50 Jahren ist zu etwa 1% an den Sterbefällen beteiligt (Spalte Verstorben)
- Das Risiko an COVID-19 zu sterben ist im Mittel für die über 65 Jährigen etwa 75 mal höher als für die unter 65-Jährigen (Spalte 'Verst/Posit', 10340/139)
- Das Risiko mit 75-84 Jahren bei Infektion an/mit COVID-19 zu sterben ist 100 mal höher als mit 25-34 Jahren (Spalte Verst/Posit).
- Von den über 85-jährigen starb jeder fünfte positiv Getestete



<center>
**Österreich: Positive getestete und Verstorbene nach Altersgruppe und Geschlecht (Normiert auf 100k)**
```{r}
pt <- makePT(dpcd.oe, "Gender")
pt$addRowDataGroups("AgeGroup2", outlineBefore=TRUE, outlineTotal=TRUE)
pt$addRowDataGroups("AgeGroup", addTotal=FALSE)
defPTcalcRel(pt, "Posit/Einw", "paste0(round(sum(sumConfirmed)/sum(Population)*100000/1000,1), ' k')")
defPTcalcRel(pt, "Verst/Posit", "round(sum(sumDeath)/sum(sumConfirmed)*100000)")
defPTcalcAbs(pt, "Verstorben", "sum(sumDeath)")
pt$renderPivot()

```  
</center>


## Bezugssystem für Impfnebenwirkungen

Von besonderem Interesse in Hinsicht auf eventuelle tödlichen Nebenwirkungen einer Impfung ist die *Anzahl der Sterbefälle pro 100.000 Infizierte*. Ein direkter Schluss von der Anzahl der Positiv Getesteten auf die Anzahl der Infizierten ist, wie weiter oben bereits angesprochen, nicht ohne Weiteres möglich.

Drei Prevalenzstudien der Statistik Austria aus 2020 legen nahe, dass etwas doppelt so viele Personen asymtpomatisch erkranken wie positiv getestet werden. Andere Quellen vermuten bis zu vier mal so viele Asymptomatische wie positiv Getestete. Das tatsächliche Verhältnis wird u.a. von der Art und Anzahl der COVID Tests abhängen.

In der folgenden Tabelle wird die Anzahl der Todesfälle bei 100.000 Infizierten für 50% und 75% Asymptomatische gerechnet. 

Diese Werte geben einen ersten Anhaltspunkt für den Vergleich mit der Anzahl der tötlichen Nebenwirkungen einer Impfung. Anfang 2021 wurde aus England in vorläufigen Studien über Astra-Zeneca von wenigen (1-5) Fällen auf 100.000 Impfungen mit tödlichen Nebenwirkungen berichtet, ohne das Alter der Betroffenen näher zu spezifizieren.

Wenn von den tödlichen Nebenwirkungen (SinusVenen Trombose) hauptsächlich junge Frauen unter 50 Jahren betroffen wären, dann wäre das Risiko an der Impfung zu sterben grösser als das Risiko an einer Infektion  mit Covid-19 zu sterben. Wenn auf der anderen Seite die tödlichen Nebenwirkungen der Impfung in ähnlicher Weise altersabhängig sind wie die Erkrankung an COVID-19 selbst, dann würde der Nutzen der Impfung die Nebenwirkungen um einen Faktor 100-200 übertreffen.

Eine Einschätzung der Impfnebenwirkungen erfordert genaue Daten über die schweren und tödlichen Krankheitsverläufe und wird in einer späteren Untersuchung  versucht.

- Für Frauen unter 25 Jahre wurde im ersten Jahr der Pandemie kein einziger Todesfall verzeichnet. Eine Impfung aus der Motivation Verhinderung von schweren Krankheitsverläufen wäre also fragwürdig.
- Schwere Nebenwirkungen im Ausmass von einigen Todesfällen pro 100.000 Infizierte können den Nutzen der Impfung  angesichts der hohen Anzahl von COVID-19 Todesfällen weder aus epidemiologischer noch aus individueller Sicht auch nur ansatzweise in Frage stellen (vorausgesetzt exponentielle Altersabhängigkeit auch der Nebenwirkungen und entsprechende Schutzwirkung der Impfung bei den besonders gefährdeten Altersgruppen). Anmerkung: Pikanterweise wurde der Impfstoff von Astra-Zeneca anfangs (mangels entsprechender Daten in ihrer Studie) für die gefährdeten Altersgruppen nicht freigegeben.

<center>
**Österreich: Asymptomatische und Verstorbene nach Altersgruppe und Geschlecht (Normiert auf 100k)**
```{r}

pt <- makePT(dpcd.oe, "Gender")
pt$addRowDataGroups("AgeGroup2", outlineBefore=TRUE, outlineTotal=TRUE)
pt$addRowDataGroups("AgeGroup", addTotal=FALSE)
defPTcalcRel(pt, "Verst/Posit*2_100k", "paste0(round(sum(sumDeath)/sum(sumConfirmed*2)*100000))")
defPTcalcRel(pt, "Verst/Posit*4_100k", "paste0(round(sum(sumDeath)/sum(sumConfirmed*4)*100000))")
pt$renderPivot()

```  


# Gegenüberstellung der COVID-19 und der demographischen Sterblichkeit

Im folgende einige Eckdaten zur Sterblichkeit an COVID-19 im Vergleich zu den Todesfällen im Jahr 2019. Die Zahlen sind hier zunächst stark gerundet um einprägsame Werte zu erhalten.

- Im ersten Jahr der Pandemie sind etwa 1% der mit COVID-19 Infizierten verstorben (8.400 Todesfälle von grob 900.000 Infizierten bei 50% Asymptomatischen)
- Im Jahr 2019 ist etwa 1% der Bevölkerung verstorben  (etwa 83.000 von 8.9 Mio Einwohnern)
- Die Anzahl der im ersten Jahr der Pandemie an COVID-19 Verstorbenen ist etwa 10% der in 2019 Verstorbenen
- Die Altersabhängigkeit der COVID-19 Todesfälle ist noch stärker als bei den demographischen Todesfällen


```{r}

# Features and labels for plot
dpcd.of <- dpcd.oe %>% 
  dplyr::select(AgeGroup, AgeGroup2, Gender, sumDeath, sumDeath_100k, Deceased, Deceased_100k) %>%
  dplyr::mutate(relFatalityRate100k=sumDeath_100k/Deceased_100k*100, relFatalityRate=sumDeath/Deceased*100) 
```


### Anzahl Verstorbene in absoluten Zahlen

```{r}

dpcd.og.a <- dpcd.of %>%
  #dplyr::mutate(relFatalityRate=relFatalityRate*1000) %>%
  tidyr::gather(key="TodesUrsache", value="Anzahl", sumDeath, Deceased, relFatalityRate) %>%
  dplyr::mutate(TodesUrsache=factor(TodesUrsache, levels=c("sumDeath","Deceased","relFatalityRate"), labels=c("COVID-19 (2020)","Demographisch (2019)", "Anteil COVID-19 [%]")))

ggplot(data=dpcd.og.a %>% dplyr::mutate(AgeGroups=as.integer(AgeGroup)), 
       aes(x=AgeGroups, y=Anzahl, shape=Gender, color=TodesUrsache)) +
  scale_x_continuous(breaks=1:10, labels=levels(dpcd.og.a$AgeGroup)) +
  scale_y_continuous(limits=c(.5,NA), trans="log10", breaks=c(1,2,5,10,20,50,100,200,500,1000,2000,5000,10000,20000)) +
  scale_fill_manual(values=cbPalette) +
  scale_color_manual(values=cbPalette) +
  geom_point(size=2) + 
  geom_path(aes(linetype=Gender)) + 
  ggtitle("COVID-19 Österreich: Anzahl Sterbefälle nach Todesursache und Altersgruppe")
```

Die Sterblichkeit an COVID-19 steigt ebenso wie die demograpische Sterblichkeit exponentiell mit dem Alter.

- Die demograpische Sterblichkeit steigt innerhalb von ca. *60 Jahren* (W, 15-75) um einen Faktor 100 (das sind ca. 8% pro Jahrgang)
- Die COVID-19 Sterblichkeit steigt innerhalb von ca. *35 Jahren* (M, 35-70) um einen Faktor 100 (das sind ca. 14% pro Jahrgang)

- Die COVID-19 Sterblichkeit der unter 25-Jährigen liegt im Vergleich zur demograpischen Sterblichkeit bei etwa 1%
- Bei den über 65-Jährigen liegt der gleiche Wert mit 11% um einen Faktor 10 höher.

- Der Anteil der an COVID-19 Verstorbenen ist in der Altersgruppe von 75-85 mit 12.25% am größten


<center>
**Anzahl Verstorbene in absoluten Zahlen**

```{r}
#, "Gender"
pt <- makePT(dpcd.oe, "Gender")
#pt$addRowDataGroups("Gender", outlineBefore=TRUE, outlineTotal=FALSE)
pt$addRowDataGroups("AgeGroup2", outlineBefore=TRUE, outlineTotal=TRUE)
pt$addRowDataGroups("AgeGroup", addTotal=FALSE)

defPTcalcAbs(pt, "VerstDemog", "round(sum(Deceased))")
defPTcalcAbs(pt, "VerstCovid", "round(sum(sumDeath))")
defPTcalcAbs(pt, "Covid/Demog%", "round(sum(sumDeath)/sum(Deceased)*100,2)")
pt$renderPivot()

```


### Anzahl Verstorbene normiert auf 100.000 Einwohner bzw. Positive

```{r}

dpcd.og <- dpcd.of %>%
  tidyr::gather(key="TodesUrsache", value="Anzahl", sumDeath_100k, Deceased_100k, relFatalityRate100k) %>%
  dplyr::mutate(TodesUrsache=factor(TodesUrsache, levels=c("sumDeath_100k","Deceased_100k","relFatalityRate100k"), labels=c("COVID-19 (2020)","Demographisch (2019)", "Anteil COVID-19 [%]")))

ggplot(data=dpcd.og %>% dplyr::mutate(AgeGroups=as.integer(AgeGroup)), 
       aes(x=AgeGroups, y=Anzahl, shape=Gender, color=TodesUrsache)) +
  scale_x_continuous(breaks=1:10, labels=levels(dpcd.og$AgeGroup)) +
  scale_y_continuous(limits=c(5,NA), trans="log10", breaks=c(1,2,5,10,20,50,100,200,500,1000,2000,5000,10000,20000,50000)) +
  scale_fill_manual(values=cbPalette) +
  scale_color_manual(values=cbPalette) +
  geom_point(size=2) + 
  geom_path(aes(linetype=Gender)) + 
  ggtitle("COVID-19 Österreich: Anzahl Sterbefälle pro 100k nach Todesursache und Altersgruppe")
```

Die Umrechnung der österreich-spezifischen Alterspyramide durch Normierung auf 100.000 Einwohner bzw. positiv Getestete pro Altersgruppe ergibt einen neuen Blickwinkel auf die Daten. Zu beachten ist insbesondere die Spalte 'Covid/Demog%', die das Verhältnis der COVID-19 Todesfälle im Vergleich zu den demographischen Todesfällen pro 100.000 Positive bzw. Einwohner in % berechnet.

- Der Prozentsatz der Verstorbenen  COVID-19 positiv Getesteten ist etwa doppelt so hoch wie der Prozentsatz der demographischen Sterbefälle pro Jahr. Setzt man die Anzahl der Asymptomatischen mit 50% an, so ist die Anzahl der COVID-19 Toten pro 100.000 Infizierte etwa so hoch wie die Anzahl der demographischen Sterbefälle.
- Für ein vollständige Durchseuchung der gesamten Bevölkerung mit COVID-19 bedeutet das (ohne Impfung) Grössenordnung 80.000 COVID-19 Todesfälle. Am Anfang der Pandemie im Frühjahr 2020 wurde mit 100.000 Toten eine ähnliche Zahl als 'Worst Case' Szenario kolportiert.
- Dieser Wert entspricht im wesentlichen einer 'Case Fatality Ratio' (d.h. Sterblichkeit bei Infektion) von 1%. In Q1/2020 wurde in einigen Studien von 'Case Fatality Ratio's von 2-5% in verschiedenen Ländern berichtet. In den meisten Fällen wurde die Methode zur Feststellung der Anzahl der Infizierten nicht explizit betrachtet.

Eine Abschätzung der zu erwartenden Anzahl von Todesfällen bei gegebener Durchimpfungsrate folgt in einer künftigen Untersuchung.

<center>
**Anzahl Verstorbene normiert auf 100.000 Einwohner bzw. Positive**

```{r}
#, "Gender"
pt <- makePT(dpcd.oe, "Gender")
#pt$addRowDataGroups("Gender", outlineBefore=TRUE, outlineTotal=FALSE)
pt$addRowDataGroups("AgeGroup2", outlineBefore=TRUE, outlineTotal=TRUE)
pt$addRowDataGroups("AgeGroup", addTotal=FALSE)

defPTcalcRel(pt, "VerstDemog100k", "round(sum(Deceased)/sum(Population)*100000)")
defPTcalcRel(pt, "VerstCovid100k", "round(sum(sumDeath)/sum(sumConfirmed)*100000)")
defPTcalcRel(pt, "Covid/Demog%", "round((sum(sumDeath)/sum(sumConfirmed))/(sum(Deceased)/sum(Population))*100,2)")
pt$renderPivot()

```
</center>


# Zusammenfassung

Die vorliegende Zusammenstellung von Daten der StatistikAustria und AGES zu Bevölkerung, Sterblichkeit und COVID-19 versucht die alters- und geschlechtsabhängigen Gesetzmäßigkeiten der Pandemie zu beleuchten und ein grobes Mengengerüst für die Beurteilung der vergangenen und künftigen Entwicklungen und Massnahmen zu zeichnen. 

Dies als Basis für weitere Untersuchungen, insbesondere der Wirkungen und Nebenwirkung der Corona Impfungen und der zu erwartenden Auswirkungen auf das epidemiologische Geschehen.






